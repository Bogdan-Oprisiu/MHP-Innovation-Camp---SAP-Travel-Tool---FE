<mvc:View
    controllerName="bts.btsapp.controller.Details"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:l="sap.ui.layout"
    xmlns:f="sap.ui.layout.form"
    xmlns:core="sap.ui.core"
    displayBlock="true">

    <VBox class="sapUiSmallMargin">

        <Toolbar>
            <Title text="Business Trip Details" level="H2"></Title>
            <ToolbarSpacer />
            <Button id="approve" text="Approve" type="Emphasized" visible="{session>/isManager}" press="handleApprovePress" />
            <Button id="decline" text="Decline" type="Emphasized" visible="{session>/isManager}" press="handleDeclinePress" />
            <Button id="modifyBT" text="Modify Business Trip" type="Emphasized" visible="{= !${session>/isManager}}" press="handleModifyPress" />
        </Toolbar>

        <f:Form id="DetailForm" editable="true">
            <f:layout>
                <f:ResponsiveGridLayout
                    labelSpanXL="3"
                    labelSpanL="3"
                    labelSpanM="3"
                    labelSpanS="12"
                    adjustLabelSpan="false"
                    emptySpanXL="4"
                    emptySpanL="4"
                    emptySpanM="4"
                    emptySpanS="0"
                    columnsXL="1"
                    columnsL="1"
                    columnsM="1"
                    singleContainerFullSize="false" />
            </f:layout>
            <f:formContainers>
                
                <!-- General Information -->
                <f:FormContainer title="General Information">
                    <f:formElements>
                        <f:FormElement label="Email">
                            <f:fields>
                                <Input value="{detail>/EMAIL}" id="email" editable="false"/>
                            </f:fields>
                        </f:FormElement>
                        <f:FormElement label="Supervisor">
                            <f:fields>
                                <Input value="{detail>/SUPERVISOR}" id="supervisor" editable="false"/>
                            </f:fields>
                        </f:FormElement>
                        <f:FormElement label="Phone Number">
                            <f:fields>
                                <Input value="{detail>/PHONE}" id="phoneNumber"/>
                            </f:fields>
                        </f:FormElement>
                    </f:formElements>
                </f:FormContainer>

                <!-- Information about Travel Country -->
                <f:FormContainer title="Information about Travel Country">
                    <f:formElements>
                        <f:FormElement label="Reason for Travel">
                            <f:fields>
                                <Input value="{detail>/REASON}" id="reasonForTravel"/>
                            </f:fields>
                        </f:FormElement>
                        <f:FormElement label="Requestor">
                            <f:fields>
                                <Input value="{detail>/REQUESTER}" id="requestor"/>
                            </f:fields>
                        </f:FormElement>
                        <f:FormElement label="Country">
                            <f:fields>
                                <Input value="{detail>/COUNTRY}" id="country"/>
                            </f:fields>
                        </f:FormElement>
                        <f:FormElement label="City">
                            <f:fields>
                                <Input value="{detail>/CITY}" id="city"/>
                            </f:fields>
                        </f:FormElement>
                    </f:formElements>
                </f:FormContainer>

                <!-- Business Trip Request -->
                <f:FormContainer title="Business Trip Request">
                    <f:formElements>
                        <f:FormElement label="Total Cost">
                            <f:fields>
                                <Input value="{detail>/TOTAL_PRICE}" id="totalCost" editable="false"/>
                            </f:fields>
                        </f:FormElement>
                        <f:FormElement label="Start Business Trip">
                            <f:fields>
                                <Input value="{parts: [{path: 'detail>/START_DATE'}], formatter: '.formatDate'}" id="startBusinessTrip"/>
                            </f:fields>
                        </f:FormElement>
                        <f:FormElement label="End Business Trip">
                            <f:fields>
                                <Input value="{parts: [{path: 'detail>/END_DATE'}], formatter: '.formatDate'}" id="endBusinessTrip"/>
                            </f:fields>
                        </f:FormElement>
                        <f:FormElement label="Advance Payment Needed">
                            <f:fields>
                                <Input value="{detail>/ADVANCED_PAYMENT}" id="advancePaymentNeeded"/>
                            </f:fields>
                        </f:FormElement>
                    </f:formElements>
                </f:FormContainer>

            </f:formContainers>
        </f:Form>
    </VBox> 
</mvc:View>
